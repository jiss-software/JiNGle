<div data-table-role="container">
    <div class="row margin0 hidden-print">
        <div class="col-lg-4 left padding0" ng-if="create">
            <div class="input-group">
                <span class="input-group-btn">
                    <a ng-href="#/{{create}}/+" class="btn btn-success">
                        <i class="fa fa-plus-square-o"></i> &nbsp; {{'action.create' | i18n}}
                    </a>
                </span>
            </div>
        </div>

        <div class="col-lg-4 right padding0">
            <div class="input-group">
                <input type="text" name="table.search.query" ng-model="settings.query" class="form-control">

                <span class="input-group-btn">
                    <button class="btn btn-default" type="button" ng-click="startSearch()" name="table.search.query.start">{{'action.find' | i18n}}</button>

                    <button class="btn btn-default" type="button" ng-click="config = !config" ng-init="config = false">
                        <i class="fa fa-wrench"></i>
                        <span class="caret"></span>
                    </button>
                </span>
            </div>
        </div>
    </div>

    <div class="row margin0 hidden-print form-horizontal" role="form" ng-show="config" data-table-role="config">
        <form class="form-horizontal" role="form">
            <div class="form-group">
                <label class="col-sm-2 control-label">{{'label.page_size' | i18n}}</label>

                <div class="col-sm-5">
                    <select class="form-control" ng-model="settings.pageSize" ng-options="size for size in sizes"></select>
                </div>
            </div>

            <div class="form-group" ng-repeat="column in columns">
                <label class="col-sm-2 control-label">{{column.name || (column.code | i18n)}}</label>

                <div class="col-sm-5" ng-if="['options', 'text'].indexOf(collection.meta[column.field].type) > -1">
                    <input ng-if="collection.meta[column.field].type == 'text'" class="form-control"
                           ng-model="collection.filter[column.field]" type="text" size="40" />

                    <select ng-if="collection.meta[column.field].type == 'options'" class="form-control"
                            data-table-filter="options" ng-model="collection.filter[column.field]" multiple="multiple"
                            ng-options="option.value as option.label for option in options[column.field]">
                    </select>
                </div>

                <div ng-if="collection.meta[column.field].type == 'number'" >
                    <div class="col-sm-2">
                        <input class="form-control" ng-model="collection.filter[column.field].from"
                               placeholder="from" type="text" size="10" />
                    </div>

                    <div class="col-sm-2">
                        <input class="form-control" ng-model="collection.filter[column.field].to"
                               placeholder="to" type="text" size="10" />
                    </div>
                </div>

                <div ng-if="['date', 'dateTime'].indexOf(collection.meta[column.field].type) > -1 " >
                    <div class="col-sm-2">
                        <input class="form-control" ng-model="collection.filter[column.field].from"
                               type="text" size="20" placeholder="from" date-range-picker
                               options="collection.meta[column.field].type == 'date' ? datePicker : dateTimePicker" />
                    </div>

                    <div class="col-sm-2">
                        <input class="form-control" ng-model="collection.filter[column.field].to"
                               type="text" size="20" placeholder="to" date-range-picker
                               options="collection.meta[column.field].type == 'date' ? datePicker : dateTimePicker" />
                    </div>
                </div>
            </div>

            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button class="btn btn-default" ng-click="changeSettings()" type="button">{{'action.find' | i18n}}</button>
                </div>
            </div>
        </form>
    </div>

    <table class="table">
        <thead>
            <tr>
                <th ng-repeat="column in columns | filter: { hidden: false }"
                    ng-init="tytle = column.name ? column.name : (column.code | i18n)">

                    <span ng-if="! collection.meta[column.field].sortable">{{tytle}}</span>

                    <a ng-click="sortName(column.field)" class="clickable"
                       ng-if="collection.meta[column.field].sortable">
                        {{tytle}}
                    </a>

                    <span class="table-control">
                        <i ng-show="isFiltered(column.field)" class="fa fa-filter"></i>
                    </span>

                    <span style="display: inline-block; width: 20px;" class="table-control">
                        <i ng-show="isSortedAsc(column.field)" class="fa fa-sort-asc"></i>
                        <i ng-show="isSortedDesc(column.field)" class="fa fa-sort-desc"></i>
                    </span>
                </th>

                <th class="hidden-print">&nbsp;</th>
            </tr>
        </thead>

        <tbody>
            <tr ng-hide="collection.data.length">
                <td colspan="999" style="text-align: center;">
                    <span ng-show="ready">{{'label.no_data' | i18n}}</span>
                    <span ng-hide="ready">{{'label.loading' | i18n}}</span>
                </td>
            </tr>

            <tr ng-show="ready" ng-repeat="item in collection.data">
                <td ng-repeat="column in columns | filter: { hidden: false }" ng-style="cellStyle(item, column)">
                    <span ng-if="! item[column.href]">{{cellFormat(item, column)}}</span>

                    <a ng-if="item[column.href]" ng-href="{{item[column.href]}}">
                        {{cellFormat(item, column)}}
                    </a>
                </td>

                <td class="hidden-print" style="font-size: 16px">
                    <a ng-href="/{{pdf}}/{{item._id}}" ng-if="pdf" target="_blank"
                       data-toggle="tooltip" data-placement="bottom" title="{{'action.print' | i18n}}"
                       style="margin-right: 3px;">

                        <i class="fa fa-file-pdf-o"></i>
                    </a>

                    <span ng-if="pdf" style="color: #538FC2;">|</span>

                    <a ng-href="#/{{show}}/{{item._id}}/show" ng-if="show" data-toggle="tooltip"
                       data-placement="bottom" title="{{'action.show' | i18n}}"
                       style="margin-right: 3px; margin-left: 3px;">

                        <i class="fa fa-eye"></i>
                    </a>

                    <a ng-href="#/{{copy}}/{{item._id}}/copy" ng-if="copy" data-toggle="tooltip"
                       data-placement="bottom" title="{{'action.copy' | i18n}}"
                       style="margin-right: 3px; margin-left: 3px;">

                        <i class="fa fa-files-o"></i>
                    </a>

                    <a ng-href="#/{{edit}}/{{item._id}}" ng-if="edit" data-toggle="tooltip"
                       data-placement="bottom" title="{{'action.edit' | i18n}}"
                       style="margin-right: 3px; margin-left: 3px;">

                        <i class="fa fa-pencil-square-o"></i>
                    </a>

                    <a ng-href="#/{{remove}}/{{item._id}}" ng-if="remove" class="delete" data-toggle="tooltip"
                       data-placement="bottom" title="{{'action.delete' | i18n}}"
                       style="margin-left: 3px;">

                        <i class="fa fa-trash-o"></i>
                    </a>
                </td>
            </tr>
        </tbody>
    </table>

    <div class="row margin0 hidden-print">
        <div class="col-lg-10 padding0">
            <nav ng-hide="pageQuantity == 1">
                <ul class="pagination">
                    <li ng-class="{ disabled: page == 1 }">
                        <a ng-click="goToPage(1)" class="clickable">&laquo;</a>
                    </li>

                    <li ng-repeat="currentPage in (pageQuantity | range: 1)" ng-class="{ active: page == currentPage }"
                        ng-show="isVisibleSelector(currentPage)">

                        <a ng-click="goToPage(currentPage)"
                           class="clickable {{currentPage == 1 && ! isVisibleSelector(2) && 'pagination_start'}} {{currentPage == pageQuantity && !isVisibleSelector(pageQuantity - 1) && 'pagination_end'}}">
                            {{currentPage}}
                        </a>
                    </li>

                    <li ng-class="{ disabled: page == pageQuantity }">
                        <a ng-click="goToPage(pageQuantity)" class="clickable">&raquo;</a>
                    </li>
                </ul>
            </nav>
        </div>

        <div class="col-lg-2 right" data-table-role="info">
            <p>{{'label.table_info' | i18n: collection.selectionSize: collection.collectionSize }}</p>
        </div>
    </div>
</div>
